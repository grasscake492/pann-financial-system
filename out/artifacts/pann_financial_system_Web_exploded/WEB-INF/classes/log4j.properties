log4j.rootLogger=INFO,stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n

# ============ 新增调试配置（追加在文件末尾） ============

# 1. Controller层详细调试 - 您的代码在org.controller包
log4j.logger.org.controller=DEBUG, stdout

# 2. Service层详细调试 - 您的代码在org.service包
log4j.logger.org.service=DEBUG, stdout

# 3. DAO/Mapper层详细调试 - 您的代码在org.mapper包
log4j.logger.org.mapper=TRACE, stdout

# 4. MyBatis SQL日志（关键）
# MyBatis 3.x版本使用：
log4j.logger.org.apache.ibatis=TRACE, stdout
# 如果是MyBatis 2.x或ibatis：
# log4j.logger.com.ibatis=DEBUG, stdout

# 5. JDBC SQL语句详细输出（非常重要）
log4j.logger.java.sql.Connection=DEBUG, stdout
log4j.logger.java.sql.Statement=DEBUG, stdout
log4j.logger.java.sql.PreparedStatement=TRACE, stdout
log4j.logger.java.sql.ResultSet=DEBUG, stdout

# 6. Spring框架调试（可选）
log4j.logger.org.springframework=INFO, stdout
log4j.logger.org.springframework.web.servlet.DispatcherServlet=INFO, stdout
log4j.logger.org.springframework.transaction=DEBUG, stdout

# 7. 事务管理调试
log4j.logger.org.springframework.jdbc.datasource.DataSourceTransactionManager=DEBUG, stdout

# 8. 防止日志重复输出
log4j.additivity.org.controller=false
log4j.additivity.org.service=false
log4j.additivity.org.mapper=false
log4j.additivity.java.sql=false

# 9. 添加文件日志输出（可选，如果希望同时输出到文件）
log4j.appender.file=org.apache.log4j.DailyRollingFileAppender
log4j.appender.file.File=logs/royalty-debug.log
log4j.appender.file.DatePattern='.'yyyy-MM-dd
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5p %c{1}:%L - %m%n
log4j.appender.file.Threshold=DEBUG