import{e as p,t as k,f as T,n as zt,b as Bt,o as r,M as Ot,G as t,F as u,P as _,J as Y,O as m,aE as U,an as y,U as I,a9 as D,S as n,u as pt,R as j}from"./vue-Bt10MVH5.js";import{P as Zt}from"./PageBackground2-DLBYLWUD.js";import{a as H}from"./Navbar-CY2pEkqo.js";import{h5 as Kt,fS as a,hg as gt,hf as Gt,hi as Jt}from"./index-BWnjimtD.js";import{a as W,e as Qt,b as Ht}from"./royalty-Czg1kzqr.js";import{c as Wt,g as Xt}from"./proxy-u4XOTzCq.js";import{a as te,r as ee,u as kt}from"./feedback-CSX88a8d.js";import{F as se,a as le}from"./feedbackStatus-DqnZOqTf.js";import{a as ae}from"./auth-x_l3GMB4.js";import"./crypto-DOZa04kq.js";const ne={class:"top-tabs"},oe={key:0,class:"tab-content"},re={class:"query-form"},ue={class:"content-table"},ie={key:0},de={key:1},pe={class:"feedback-filter"},ce={class:"feedback-item-list"},me={key:0,class:"empty-tip"},ve={class:"feedback-header"},_e={class:"feedback-id"},be={class:"feedback-content"},fe={class:"feedback-actions"},ye=["onClick"],ge=["onClick"],ke={key:0,class:"pagination"},we=["disabled"],$e=["disabled"],Ce={key:1,class:"dialog-mask"},Ue={class:"dialog-content"},xe={key:2,class:"dialog-mask"},Ae={class:"dialog-content"},Ie={key:2,class:"tab-content"},De={class:"content-table"},Se={key:0},Ve={key:0,class:"role-tag super-admin"},Fe={key:1,class:"role-tag dept-admin"},Me={key:2,class:"role-tag normal-user"},he={class:"op-btn-group"},Le=["onClick"],Pe=["onClick"],Re={key:0,class:"dialog-mask"},Ee={class:"dialog-content"},Ne={class:"form-row"},Te={class:"form-row"},Ye={class:"form-row"},je={key:0,class:"form-row"},qe={key:1,class:"form-row"},ze={class:"dialog-btns"},Be={key:1,class:"dialog-mask"},Oe={class:"dialog-content"},Ze={class:"form-row"},Ke={class:"form-row"},Ge={class:"form-row"},Je={class:"dialog-btns"},Qe={key:3,class:"tab-content"},He={class:"form-row",style:{"align-items":"center",gap:"20px","margin-bottom":"20px","flex-wrap":"wrap"}},We={style:{display:"flex","align-items":"center",gap:"10px"}},Xe=["value"],ts=["value"],es={class:"dept-section"},ss={class:"content-table"},ls={key:0},as={class:"total-row bold"},ns={class:"dept-section"},os={class:"content-table"},rs={key:0},us={class:"total-row"},is={class:"dept-section"},ds={class:"content-table"},ps={key:0},cs={class:"total-row"},ms={class:"total-row"},vs={class:"total-row bold"},_s={key:4,class:"dialog-mask"},bs={class:"dialog-content"},fs={class:"form-row"},ys={class:"form-row"},gs={class:"form-row"},ks={class:"form-row"},ws={class:"dialog-btns"},$s={__name:"SuperManage",setup(Cs){const w=p("query"),L={1:"新闻部",2:"编辑部",3:"运营部",news:1,edit:2,operation:3},X=async l=>{switch(w.value=l,l){case"query":await z();break;case"manage":await O(),await _t();break;case"user":await K();break;case"summary":break;case"account":await O();break;case"feedback":await B();break}},$=k({month:"",deptId:"",article_title:""}),tt=p([]),et=p(!1),q=p(!1),b=k({record_id:"",created_at:"",article_title:"",real_names:[],fee_amount:0,deptId:""}),z=async()=>{try{const l=new Date().getFullYear(),e={statistical_month:$.month?`${l}-${$.month.padStart(2,"0")}`:"",department_id:L[$.deptId]||"",article_title:$.article_title},s=await W(e);if(s.res_code==="0000"){const i=s.data?.list||[];tt.value=i.map(d=>{const v=d.real_names?d.real_names.join(","):"未知人员",g=d.fee_amount||0;return{...d,userAmountDetail:`${v}(${g}元)`,deptName:L[d.department_id]||"未知部门"}})}else a.error(`获取任务列表失败：${s.res_msg}`)}catch{a.error("网络异常，获取任务列表失败")}},wt=async()=>{if(!b.article_title||!b.deptId||b.fee_amount<=0){a.warning("请填写任务名称、选择部门并输入有效金额");return}try{const l={record_id:b.record_id,article_title:b.article_title,real_names:b.real_names,fee_amount:b.fee_amount,department_id:L[b.deptId]},e=await Ht(l);e.res_code==="0000"?(a.success(q.value?"新增任务成功":"编辑任务成功"),et.value=!1,await z()):a.error(`${q.value?"新增":"编辑"}任务失败：${e.res_msg}`)}catch{a.error(`网络异常，${q.value?"新增":"编辑"}任务失败`)}},V=p([]),$t=p(0),x=p(1),st=p(2),F=p(""),M=p(""),lt=k({page:1,size:100,status:""}),at=p(!1),A=p(""),h=k({reply_content:""}),nt=p(!1),P=k({status:"pending"}),ot=T(()=>{let l=[...V.value];if(F.value&&(l=l.filter(i=>i.created_at?.split("-")[1]===F.value.padStart(2,"0"))),M.value){const i=M.value.trim().toLowerCase();l=l.filter(d=>d.real_name?.toLowerCase().includes(i))}const e=(x.value-1)*st.value,s=e+st.value;return l.slice(e,s)}),rt=T(()=>{let l=[...V.value];if(F.value&&(l=l.filter(e=>e.created_at?.split("-")[1]===F.value.padStart(2,"0"))),M.value){const e=M.value.trim().toLowerCase();l=l.filter(s=>s.real_name?.toLowerCase().includes(e))}return Math.ceil(l.length/st.value)||1}),B=async()=>{try{const l=await te(lt);l.res_code==="0000"?(V.value=l.data.list||[],$t.value=l.data.total||0,x.value=1):(a.error(`查询失败：${l.res_msg}`),V.value=[])}catch{a.error("网络异常，查询反馈失败"),V.value=[]}},Ct=()=>{x.value=1},ct=l=>{l<1||l>rt.value||(x.value=l)},Ut=l=>{A.value=l,h.reply_content="",at.value=!0},mt=()=>{at.value=!1,A.value="",h.reply_content=""},xt=async()=>{if(!h.reply_content.trim()){a.warning("请输入回复内容");return}try{const l=await ee(A.value,{reply_content:h.reply_content});l.res_code==="0000"?(a.success("回复成功"),mt(),await kt(A.value,{status:"replied"}),await B()):a.error(`回复失败：${l.res_msg}`)}catch{a.error("网络异常，回复失败")}},At=l=>{A.value=l;const e=V.value.find(s=>s.feedback_id===l);e&&(P.status=e.status||"pending"),nt.value=!0},vt=()=>{nt.value=!1,A.value="",P.status="pending"},It=async()=>{try{const l=await kt(A.value,{status:P.status});l.res_code==="0000"?(a.success("状态更新成功"),vt(),await B()):a.error(`状态更新失败：${l.res_msg}`)}catch{a.error("网络异常，状态更新失败")}};k({month:"",feeRecordId:"",proxyUserId:"",beProxyUserId:"",deptId:"",amount:0});const Dt=p([]),C=p([]),St=p([]),O=async()=>{try{const l=await gt({page:1,size:999});l.res_code==="0000"?(C.value=l.data?.list||[],C.value.length>0):a.error(`加载成员列表失败：${l.res_msg}`)}catch{a.error("网络异常，加载成员列表失败")}},Vt=async()=>{try{const l=await W({page:1,size:100});l.res_code==="0000"?St.value=l.data?.list||[]:a.error(`加载稿费记录失败：${l.res_msg}`)}catch{a.error("网络异常，加载稿费记录失败")}},_t=async()=>{try{const l=await Xt();if(l.res_code==="0000"){const e=l.data?.list||[];Dt.value=e.map(s=>{const i=C.value.find(g=>g.user_id==s.proxy_user_id)?.real_name||"未知用户",d=C.value.find(g=>g.user_id==s.original_user_id)?.real_name||"未知用户",v=L[s.department_id]||"未知部门";return{...s,proxyUser:i,beProxyUser:d,deptName:v}})}else a.error(`获取代领列表失败：${l.res_msg}`)}catch{a.error("网络异常，获取代领列表失败")}};p(!1),k({proxy_id:"",proxy_user_id:"",original_user_id:"",department_id:"",proxy_month:"",fee_record_id:"",article_title:"",fee_amount:0,description:""});const Ft=async()=>{await O(),await Vt(),await _t()};zt(()=>{console.log("进入系统管理员页面，组件挂载，开始初始化数据"),Ft(),ft()});const R=p(!1),E=p(!1),o=k({userId:"",real_name:"",student_number:"",email:"",password:"",confirmPassword:"",created_at:"",deptId:""}),Z=p(!1),c=k({user_id:"",real_name:"",is_super_admin:!1,department_id:"",role:"普通成员"}),K=async()=>{try{const l=await gt();l.res_code==="0000"?C.value=l.data.list||[]:a.error(`获取人员列表失败：${l.res_msg}`)}catch{a.error("网络异常，获取人员列表失败")}},Mt=(l={})=>{E.value=!l.user_id,o.userId=l.user_id||"",o.real_name=l.real_name||"",o.student_number=l.student_number||"",o.email=l.email||"",o.created_at=l.created_at||"",o.deptId=l.department_id||"1",R.value=!0},ht=async()=>{if(E.value){const l=o.real_name.trim(),e=/^[\u4e00-\u9fa5]{2,}$/;if(!l){a.warning("请输入真实姓名");return}if(!e.test(l)){a.warning("真实姓名需为不少于两个字的纯中文");return}const s=/^\d{12}$/;if(!o.student_number||!s.test(o.student_number)){a.warning("请输入12位纯数字的学号");return}const i=/^[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;if(!o.email||!i.test(o.email)){a.warning("请输入有效的邮箱地址");return}if(!o.password.trim()){a.warning("请设置密码");return}if(o.password!==o.confirmPassword){a.warning("两次输入的密码不一致");return}try{const d={sign:"admin_sign_123456",student_number:o.student_number,real_name:o.real_name,password:o.password,email:o.email},v=await ae(d);v.res_code==="0000"?(a.success("新增成员（注册）成功"),R.value=!1,await K(),Object.assign(o,{userId:"",real_name:"",student_number:"",email:"",password:"",confirmPassword:""})):a.error(`新增成员失败：${v.res_msg}`)}catch(d){a.error("网络异常，新增成员失败"),console.error("注册接口调用失败：",d)}return}if(!o.real_name||!o.created_at||!o.deptId){a.warning("请填写所有必填字段");return}try{const l=await Gt({user_id:o.userId,real_name:o.real_name,student_number:o.student_number,email:o.email,department_id:o.deptId,created_at:o.created_at});l.res_code==="0000"?(a.success("编辑成员成功"),R.value=!1,await K()):a.error(`编辑成员失败：${l.res_msg}`)}catch{a.error("网络异常，编辑成员失败")}},Lt=l=>{c.user_id=l.user_id,c.real_name=l.real_name,c.is_super_admin=l.is_super_admin||!1,c.department_id=l.department_id||"",c.role=l.role||"普通成员",Z.value=!0},Pt=async()=>{if(!c.user_id||c.department_id===""){a.warning("请选择用户所属部门");return}try{const l={sign:"admin_sign_123456",user_id:c.user_id,is_super_admin:c.is_super_admin,department_id:c.department_id},e=await Jt(l);if(e.res_code==="0000"){a.success("角色权限修改成功"),Z.value=!1;const s=C.value.findIndex(i=>i.user_id===c.user_id);if(s>-1){const i={...C.value[s],is_super_admin:c.is_super_admin,department_id:c.is_super_admin?"":c.department_id,role:c.is_super_admin?"系统管理员":c.role};C.value[s]=i}}else a.error(`角色修改失败：${e.res_msg}`)}catch(l){a.error("网络异常，角色修改失败"),console.error("修改用户角色报错：",l)}},Rt=async l=>{try{const e=await Wt(l);e.res_code==="0000"?(a.success("移除成员成功"),await K()):a.error(`移除成员失败：${e.res_msg}`)}catch{a.error("网络异常，移除成员失败")}},G=p(""),N=p(""),bt=p([]),S=k({statistical_month:"",department_id:"",format:""}),Et=()=>{const l=new Date().getFullYear(),e=l,s=l+3,i=[];for(let d=e;d<=s;d++)i.push(d);return i},ft=()=>{N.value="",bt.value=Array.from({length:12},(l,e)=>{const s=e+1;return{value:String(s).padStart(2,"0"),label:`${s}月`}})},Nt=()=>{G.value&&N.value&&(S.statistical_month=`${G.value}-${N.value}`,Yt())},J=p([]),Q=p([]),ut=p([]),it=T(()=>H(J.value.reduce((l,e)=>l+Number(e.fee_amount||0),0))),dt=T(()=>H(Q.value.reduce((l,e)=>l+Number(e.totalAmount),0))),Tt=T(()=>H(Number(it.value)+Number(dt.value))),Yt=async()=>{if(!S.statistical_month){a.warning("请选择统计月份（YYYY-MM）");return}try{const[l,e]=S.statistical_month.split("-"),s=`${l}-${e}-01`,i=new Date(Number(l),Number(e),0).toISOString().split("T")[0],d=await W({startDate:s,endDate:i,page:1,size:100,department_id:1});if(d.res_code==="0000"){const v=d.data.list||[];J.value=v.map(f=>({...f,real_names:Array.isArray(f.real_names)?f.real_names.join(", "):f.real_names||"-"}));const g=await W({startDate:s,endDate:i,page:1,size:100,department_id:2});g.res_code==="0000"&&(Q.value=g.data.list.map(f=>({...f,real_names:Array.isArray(f.real_names)?f.real_names.join(", "):f.real_names||"-"}))),jt([...v,...g.data?.list||[]])}else a.error(`获取汇总数据失败：${d.res_msg}`)}catch(l){console.error("获取汇总数据失败:",l),a.error("网络异常，获取汇总数据失败")}},jt=l=>{const e=new Map;l.forEach(s=>{const i=s.user_ids?.length||0;if(i!==0)for(let d=0;d<i;d++){const v=s.user_ids[d],g=s.real_names[d]||"未知";e.has(v)||e.set(v,{userId:v,real_name:g,newsAmount:0,editAmount:0,bigImgAmount:0,totalAmount:0});const f=e.get(v),yt=Number(s.fee_amount)/i;s.department_id===1&&(f.newsAmount+=yt),s.department_id===2&&(f.editAmount+=yt)}}),ut.value=Array.from(e.values()).map(s=>({...s,totalAmount:s.newsAmount+s.editAmount+s.bigImgAmount}))},qt=async()=>{if(!S.statistical_month){a.warning("请选择统计月份（YYYY-MM）");return}try{const l={statistical_month:S.statistical_month};console.log("导出接口请求参数：",l);const e=await Qt(l);if(console.log(e),e.res_code==="0000"){const{fileUrl:s,recordCount:i,exportTime:d}=e.data;if(a.success(`导出成功！${d}，共${i}条记录`),s){const v=document.createElement("a");v.href=s,v.download=`稿费汇总_${S.statistical_month}.${S.format.toLowerCase()}`,v.click()}}else a.error(`导出失败：${e.res_msg}`)}catch(l){console.error("导出接口调用失败：",l),a.error("导出失败："+(l.response?.data?.res_msg||"网络异常"))}};return k({month:""}),p([]),z(),O(),(l,e)=>(r(),Bt(Zt,null,{"card-content":Ot(()=>[t("div",ne,[t("button",{class:Y(["top-tab-btn",{active:w.value==="query"}]),onClick:e[0]||(e[0]=s=>X("query"))}," 任务查询 ",2),t("button",{class:Y(["top-tab-btn",{active:w.value==="feedback"}]),onClick:e[1]||(e[1]=()=>{w.value="feedback",B()})}," 查看反馈 ",2),t("button",{class:Y(["top-tab-btn",{active:w.value==="user"}]),onClick:e[2]||(e[2]=s=>X("user"))}," 人员管理 ",2),t("button",{class:Y(["top-tab-btn",{active:w.value==="summary"}]),onClick:e[3]||(e[3]=s=>X("summary"))}," 稿费汇总 ",2)]),w.value==="query"?(r(),u("div",oe,[t("div",re,[e[34]||(e[34]=t("label",null,"选择月份:",-1)),m(t("select",{class:"form-select","onUpdate:modelValue":e[4]||(e[4]=s=>$.month=s)},[...e[32]||(e[32]=[t("option",{value:""},"全部",-1),t("option",{value:"01"},"1月",-1),t("option",{value:"02"},"2月",-1),t("option",{value:"03"},"3月",-1),t("option",{value:"04"},"4月",-1),t("option",{value:"05"},"5月",-1),t("option",{value:"06"},"6月",-1),t("option",{value:"07"},"7月",-1),t("option",{value:"08"},"8月",-1),t("option",{value:"09"},"9月",-1),t("option",{value:"10"},"10月",-1),t("option",{value:"11"},"11月",-1),t("option",{value:"12"},"12月",-1)])],512),[[U,$.month]]),e[35]||(e[35]=t("label",null,"选择部门:",-1)),m(t("select",{class:"form-select","onUpdate:modelValue":e[5]||(e[5]=s=>$.deptId=s)},[...e[33]||(e[33]=[t("option",{value:""},"全部",-1),t("option",{value:"news"},"新闻部",-1),t("option",{value:"edit"},"编辑部",-1),t("option",{value:"operation"},"运营部",-1)])],512),[[U,$.deptId]]),e[36]||(e[36]=t("label",null,"任务名称:",-1)),m(t("input",{type:"text",placeholder:"输入任务名称查询",class:"form-input","onUpdate:modelValue":e[6]||(e[6]=s=>$.article_title=s)},null,512),[[y,$.article_title]]),t("button",{class:"query-btn",onClick:z},"查询")]),t("table",ue,[e[38]||(e[38]=t("thead",null,[t("tr",null,[t("th",null,"日期"),t("th",null,"任务名称"),t("th",null,"参与人"),t("th",null,"金额详情"),t("th",null,"部门")])],-1)),t("tbody",null,[tt.value.length===0?(r(),u("tr",ie,[...e[37]||(e[37]=[t("td",{colspan:"5",class:"empty-tip"},"暂无任务记录",-1)])])):_("",!0),(r(!0),u(I,null,D(tt.value,s=>(r(),u("tr",{key:s.record_id},[t("td",null,n(s.created_at),1),t("td",null,n(s.article_title),1),t("td",null,n(s.real_names?.join(", ")||"-"),1),t("td",null,n(s.fee_amount),1),t("td",null,n(s.deptName),1)]))),128))])])])):_("",!0),w.value==="feedback"?(r(),u("div",de,[t("div",pe,[e[41]||(e[41]=t("label",null,"反馈状态:",-1)),m(t("select",{class:"form-select","onUpdate:modelValue":e[7]||(e[7]=s=>lt.status=s)},[...e[39]||(e[39]=[t("option",{value:""},"全部",-1),t("option",{value:"pending"},"待处理",-1),t("option",{value:"replied"},"已回复",-1)])],512),[[U,lt.status]]),e[42]||(e[42]=t("label",null,"月份:",-1)),m(t("select",{class:"form-select","onUpdate:modelValue":e[8]||(e[8]=s=>F.value=s)},[...e[40]||(e[40]=[t("option",{value:""},"全部",-1),t("option",{value:"1"},"1月",-1)])],512),[[U,F.value]]),e[43]||(e[43]=t("label",null,"用户姓名:",-1)),m(t("input",{type:"text",placeholder:"输入姓名模糊查询",class:"form-input","onUpdate:modelValue":e[9]||(e[9]=s=>M.value=s)},null,512),[[y,M.value]]),t("button",{class:"query-btn",onClick:Ct},"查询")]),t("div",ce,[ot.value.length===0?(r(),u("div",me,"暂无反馈数据")):_("",!0),(r(!0),u(I,null,D(ot.value,s=>(r(),u("div",{class:"feedback-item",key:s.feedback_id},[t("div",ve,[t("span",_e,"反馈ID："+n(s.feedback_id),1),t("span",{class:Y(["status-tag",pt(se)[s.status]])},n(pt(le)[s.status]),3)]),t("div",be,[t("p",null,[e[44]||(e[44]=t("span",{class:"label"},"反馈用户：",-1)),j(n(s.real_name),1)]),t("p",null,[e[45]||(e[45]=t("span",{class:"label"},"反馈内容：",-1)),j(n(s.content),1)]),t("p",null,[e[46]||(e[46]=t("span",{class:"label"},"反馈时间：",-1)),j(n(s.created_at),1)]),t("p",null,[e[47]||(e[47]=t("span",{class:"label"},"回复时间：",-1)),j(n(s.replied_at||"未回复"),1)]),t("p",null,[e[48]||(e[48]=t("span",{class:"label"},"回复内容：",-1)),j(n(s.reply_content||"暂无回复"),1)])]),t("div",fe,[t("button",{class:"op-btn reply-btn",onClick:i=>Ut(s.feedback_id)},"回复",8,ye),t("button",{class:"op-btn status-btn",onClick:i=>At(s.feedback_id)},"改状态",8,ge)])]))),128))]),ot.value.length>0?(r(),u("div",ke,[t("button",{class:"page-btn",onClick:e[10]||(e[10]=s=>ct(x.value-1)),disabled:x.value<=1}," 上一页 ",8,we),t("span",null,"第"+n(x.value)+"页 / 共"+n(rt.value)+"页",1),t("button",{class:"page-btn",onClick:e[11]||(e[11]=s=>ct(x.value+1)),disabled:x.value>=rt.value}," 下一页 ",8,$e)])):_("",!0),at.value?(r(),u("div",Ce,[t("div",Ue,[t("h4",null,"回复反馈（ID: "+n(A.value)+"）",1),m(t("textarea",{placeholder:"请输入回复内容",class:"reply-textarea","onUpdate:modelValue":e[12]||(e[12]=s=>h.reply_content=s)},null,512),[[y,h.reply_content]]),t("div",{class:"dialog-btns"},[t("button",{class:"cancel-btn",onClick:mt},"取消"),t("button",{class:"confirm-btn",onClick:xt},"提交回复")])])])):_("",!0),nt.value?(r(),u("div",xe,[t("div",Ae,[t("h4",null,"更新反馈状态（ID: "+n(A.value)+"）",1),m(t("select",{class:"form-select","onUpdate:modelValue":e[13]||(e[13]=s=>P.status=s)},[...e[49]||(e[49]=[t("option",{value:"pending"},"待处理",-1),t("option",{value:"replied"},"已回复",-1)])],512),[[U,P.status]]),t("div",{class:"dialog-btns"},[t("button",{class:"cancel-btn",onClick:vt},"取消"),t("button",{class:"confirm-btn",onClick:It},"确认更新")])])])):_("",!0)])):_("",!0),w.value==="user"?(r(),u("div",Ie,[e[63]||(e[63]=t("div",{class:"section-title"},[t("div",{class:"title-line"}),t("h3",null,"目前成员")],-1)),t("button",{class:"add-btn",onClick:e[14]||(e[14]=s=>Mt())},"新增成员"),t("table",De,[e[51]||(e[51]=t("thead",null,[t("tr",null,[t("th",null,"真实姓名"),t("th",null,"学号"),t("th",null,"邮箱"),t("th",null,"所属部门"),t("th",null,"角色权限"),t("th",null,"操作")])],-1)),t("tbody",null,[C.value.length===0?(r(),u("tr",Se,[...e[50]||(e[50]=[t("td",{colspan:"8",class:"empty-tip"},"暂无成员记录",-1)])])):_("",!0),(r(!0),u(I,null,D(C.value,s=>(r(),u("tr",{key:s.user_id},[t("td",null,n(s.real_name),1),t("td",null,n(s.student_number||"-"),1),t("td",null,n(s.email||"-"),1),t("td",null,n(L[s.department_id]||"无"),1),t("td",null,[s.is_super_admin?(r(),u("span",Ve,"系统管理员")):s.department_id&&s.department_id!==""?(r(),u("span",Fe,"部门管理员")):(r(),u("span",Me,"普通用户"))]),t("td",null,[t("div",he,[t("button",{class:"op-btn primary",onClick:i=>Lt(s)},"修改角色",8,Le),t("button",{class:"op-btn danger",onClick:i=>Rt(s.user_id)},"移除",8,Pe)])])]))),128))])]),R.value?(r(),u("div",Re,[t("div",Ee,[t("h4",null,n(E.value?"新增成员":"编辑成员"),1),t("div",Ne,[e[52]||(e[52]=t("label",{class:"justify-label"},"成员姓名:",-1)),m(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[15]||(e[15]=s=>o.real_name=s),placeholder:"请输入真实姓名"},null,512),[[y,o.real_name]])]),t("div",Te,[e[53]||(e[53]=t("label",{class:"justify-label"},"学号:",-1)),m(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[16]||(e[16]=s=>o.student_number=s),placeholder:"请输入12位纯数字学号",maxlength:"12"},null,512),[[y,o.student_number]])]),t("div",Ye,[e[54]||(e[54]=t("label",{class:"justify-label"},"邮箱:",-1)),m(t("input",{type:"email",class:"form-input","onUpdate:modelValue":e[17]||(e[17]=s=>o.email=s),placeholder:"请输入有效邮箱"},null,512),[[y,o.email]])]),E.value?(r(),u("div",je,[e[55]||(e[55]=t("label",{class:"justify-label"},"密码:",-1)),m(t("input",{type:"password",class:"form-input","onUpdate:modelValue":e[18]||(e[18]=s=>o.password=s),placeholder:"请设置密码"},null,512),[[y,o.password]])])):_("",!0),E.value?(r(),u("div",qe,[e[56]||(e[56]=t("label",{class:"justify-label"},"确认密码:",-1)),m(t("input",{type:"password",class:"form-input","onUpdate:modelValue":e[19]||(e[19]=s=>o.confirmPassword=s),placeholder:"请再次输入密码"},null,512),[[y,o.confirmPassword]])])):_("",!0),t("div",ze,[t("button",{class:"cancel-btn",onClick:e[20]||(e[20]=s=>R.value=!1)},"取消"),t("button",{class:"confirm-btn",onClick:ht},"确认")])])])):_("",!0),Z.value?(r(),u("div",Be,[t("div",Oe,[e[62]||(e[62]=t("h4",null,"修改用户角色权限",-1)),t("div",Ze,[e[57]||(e[57]=t("label",null,"用户姓名:",-1)),m(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[21]||(e[21]=s=>c.real_name=s),disabled:""},null,512),[[y,c.real_name]])]),t("div",Ke,[e[59]||(e[59]=t("label",null,"所属部门:",-1)),m(t("select",{class:"form-input","onUpdate:modelValue":e[22]||(e[22]=s=>c.department_id=s)},[...e[58]||(e[58]=[t("option",{value:""},"请选择部门",-1),t("option",{value:"1"},"新闻部",-1),t("option",{value:"2"},"编辑部",-1),t("option",{value:"3"},"运营部",-1)])],512),[[U,c.department_id]])]),t("div",Ge,[e[61]||(e[61]=t("label",null,"用户角色:",-1)),m(t("select",{class:"form-input","onUpdate:modelValue":e[23]||(e[23]=s=>c.role=s)},[...e[60]||(e[60]=[t("option",{value:"部门管理员"},"部门管理员",-1),t("option",{value:"系统管理员"},"系统管理员",-1)])],512),[[U,c.role]])]),t("div",Je,[t("button",{class:"cancel-btn",onClick:e[24]||(e[24]=s=>Z.value=!1)},"取消"),t("button",{class:"confirm-btn",onClick:Pt},"确认修改")])])])):_("",!0)])):_("",!0),w.value==="summary"?(r(),u("div",Qe,[e[82]||(e[82]=t("div",{class:"section-title"},[t("div",{class:"title-line"}),t("h3",null,"稿费汇总与导出")],-1)),t("div",He,[t("div",We,[e[66]||(e[66]=t("label",null,"统计月份:",-1)),m(t("select",{class:"form-select","onUpdate:modelValue":e[25]||(e[25]=s=>G.value=s),onChange:ft},[e[64]||(e[64]=t("option",{value:""},"请选择年份",-1)),(r(!0),u(I,null,D(Et(),s=>(r(),u("option",{key:s,value:s},n(s)+"年 ",9,Xe))),128))],544),[[U,G.value]]),m(t("select",{class:"form-select","onUpdate:modelValue":e[26]||(e[26]=s=>N.value=s),onChange:Nt},[e[65]||(e[65]=t("option",{value:""},"请选择月份",-1)),(r(!0),u(I,null,D(bt.value,s=>(r(),u("option",{key:s.value,value:s.value},n(s.label),9,ts))),128))],544),[[U,N.value]])]),e[67]||(e[67]=t("div",{style:{display:"flex","align-items":"center"}},null,-1)),t("button",{class:"export-btn",onClick:qt},"导出数据")]),t("div",es,[e[71]||(e[71]=t("label",null,"新闻部:",-1)),t("table",ss,[e[69]||(e[69]=t("thead",null,[t("tr",null,[t("th",null,"日期"),t("th",null,"任务名称"),t("th",null,"拍摄人员"),t("th",null,"任务总金额")])],-1)),t("tbody",null,[J.value.length===0?(r(),u("tr",ls,[...e[68]||(e[68]=[t("td",{colspan:"4",class:"empty-tip"},"暂无新闻部稿费记录",-1)])])):_("",!0),(r(!0),u(I,null,D(J.value,s=>(r(),u("tr",{key:s.record_id},[t("td",null,n(s.created_at||"-"),1),t("td",null,n(s.article_title||"-"),1),t("td",null,n(s.real_names||"-"),1),t("td",null,n(pt(H)(s.fee_amount))+"元",1)]))),128))])]),t("div",as,[e[70]||(e[70]=t("label",null,"新闻部总稿费:",-1)),t("span",null,n(it.value)+"元",1)])]),t("div",ns,[e[75]||(e[75]=t("label",null,"编辑部:",-1)),t("table",os,[e[73]||(e[73]=t("thead",null,[t("tr",null,[t("th",null,"日期"),t("th",null,"任务名称"),t("th",null,"拍摄人员"),t("th",null,"任务总金额")])],-1)),t("tbody",null,[Q.value.length===0?(r(),u("tr",rs,[...e[72]||(e[72]=[t("td",{colspan:"4",class:"empty-tip"},"暂无编辑部稿费记录",-1)])])):_("",!0),(r(!0),u(I,null,D(Q.value,s=>(r(),u("tr",{key:s.projectId},[t("td",null,n(s.created_at)+"元",1),t("td",null,n(s.article_title),1),t("td",null,n(s.real_names),1),t("td",null,n(s.fee_amount)+"元",1)]))),128))])]),t("div",us,[e[74]||(e[74]=t("label",null,"编辑部总:",-1)),t("span",null,n(dt.value)+"元",1)])]),t("div",is,[e[81]||(e[81]=t("label",null,"稿费汇总:",-1)),t("table",ds,[e[77]||(e[77]=t("thead",null,[t("tr",null,[t("th",null,"姓名"),t("th",null,"新闻部稿费"),t("th",null,"编辑部稿费"),t("th",null,"大图稿费"),t("th",null,"总金额")])],-1)),t("tbody",null,[ut.value.length===0?(r(),u("tr",ps,[...e[76]||(e[76]=[t("td",{colspan:"5",class:"empty-tip"},"暂无汇总数据",-1)])])):_("",!0),(r(!0),u(I,null,D(ut.value,s=>(r(),u("tr",{key:s.userId},[t("td",null,n(s.real_name),1),t("td",null,n(s.newsAmount)+"元",1),t("td",null,n(s.editAmount)+"元",1),t("td",null,n(s.bigImgAmount)+"元",1),t("td",null,n(s.totalAmount)+"元",1)]))),128))])]),t("div",cs,[e[78]||(e[78]=t("label",null,"新闻部总:",-1)),t("span",null,n(it.value)+"元",1)]),t("div",ms,[e[79]||(e[79]=t("label",null,"编辑部总:",-1)),t("span",null,n(dt.value)+"元",1)]),t("div",vs,[e[80]||(e[80]=t("label",null,"平台总稿费:",-1)),t("span",null,n(Tt.value)+"元",1)])])])):_("",!0),et.value?(r(),u("div",_s,[t("div",bs,[t("h4",null,n(q.value?"新增任务":"编辑任务"),1),t("div",fs,[e[83]||(e[83]=t("label",null,"日期:",-1)),m(t("input",{type:"date",class:"form-input","onUpdate:modelValue":e[27]||(e[27]=s=>b.created_at=s)},null,512),[[y,b.created_at]])]),t("div",ys,[e[84]||(e[84]=t("label",null,"任务名称:",-1)),m(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[28]||(e[28]=s=>b.article_title=s)},null,512),[[y,b.article_title]])]),t("div",gs,[e[85]||(e[85]=t("label",null,"参与人及金额:",-1)),m(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[29]||(e[29]=s=>b.userAmountDetail=s),placeholder:"如：张三(100),李四(200)"},null,512),[[y,b.userAmountDetail]])]),t("div",ks,[e[87]||(e[87]=t("label",null,"部门:",-1)),m(t("select",{class:"form-input","onUpdate:modelValue":e[30]||(e[30]=s=>b.deptId=s)},[...e[86]||(e[86]=[t("option",{value:"news"},"新闻部",-1),t("option",{value:"edit"},"编辑部",-1)])],512),[[U,b.deptId]])]),t("div",ws,[t("button",{class:"cancel-btn",onClick:e[31]||(e[31]=s=>et.value=!1)},"取消"),t("button",{class:"confirm-btn",onClick:wt},"确认")])])])):_("",!0)]),_:1}))}},Ls=Kt($s,[["__scopeId","data-v-ff967bda"]]);export{Ls as default};
