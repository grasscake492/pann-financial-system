import{aB as E,e as w,t as h,r as N,b as U,o as d,M as y,G as a,O as u,F as m,P as p,an as f,S as i,aD as q,V as A,R as S}from"./vue-Bt10MVH5.js";import{P as $}from"./PageBackground-B-fVelI8.js";import{a as j}from"./auth-x_l3GMB4.js";import{h5 as D,hb as M,fS as g}from"./index-BWnjimtD.js";import{a as z}from"./md5-DZk-BtrE.js";import"./crypto-DOZa04kq.js";const F={class:"register-container"},I={class:"form-group"},T=["disabled"],Z={key:0,class:"error-tip"},Y={class:"form-group"},G=["disabled"],H={key:0,class:"error-tip"},J={class:"form-group"},K=["disabled"],L={key:0,class:"error-tip"},Q={class:"form-group"},W=["type","disabled"],X={key:0,class:"error-tip"},ee={class:"form-group"},se=["disabled"],te={key:0,class:"error-tip"},oe={class:"login-link"},ae=["disabled"],re={__name:"Register",setup(ne){const P=E(),b=w(null),l=w(!1),e=h({username:"",account:"",email:"",password:"",confirmPwd:""}),s=h({username:"",account:"",email:"",password:"",confirmPwd:""}),n=w(!1),k=()=>{s.username="",e.username.trim()?/^[\u4e00-\u9fa5]+$/.test(e.username.trim())?s.username="":s.username="å§“åä»…æ”¯æŒè¾“å…¥ä¸­æ–‡":s.username="çœŸå®å§“åä¸èƒ½ä¸ºç©º"},x=()=>{s.account="";const o=e.account.trim();if(!o){s.account="å­¦å·ä¸èƒ½ä¸ºç©º";return}if(o.length!==12){s.account="å­¦å·å¿…é¡»ä¸º12ä½";return}/^\d{12}$/.test(o)?s.account="":s.account="å­¦å·å¿…é¡»ä¸º12ä½çº¯æ•°å­—"},R=()=>{const o=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;e.email.trim()?o.test(e.email.trim())?s.email="":s.email="è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€ï¼ˆå¦‚ï¼šxxx@qq.comï¼‰":s.email="é‚®ç®±ä¸èƒ½ä¸ºç©º"},B=()=>{e.password.trim()?e.password.length<8||e.password.length>16?s.password="å¯†ç éœ€8-16ä½":s.password="":s.password="å¯†ç ä¸èƒ½ä¸ºç©º"},V=()=>{e.confirmPwd.trim()?e.confirmPwd!==e.password?s.confirmPwd="ä¸¤æ¬¡å¯†ç è¾“å…¥ä¸ä¸€è‡´":s.confirmPwd="":s.confirmPwd="è¯·ç¡®è®¤å¯†ç "},C=()=>{const o=z(e);return Object.assign(s,o),Object.keys(o).length===0},O=async()=>{if(C()){n.value=!0;try{const o={student_number:e.account,real_name:e.username,email:e.email,password:e.password},t=M(o),v={...o,sign:t},c=await j(v);switch(console.log("ã€æ³¨å†Œæ¥å£è¿”å›ç»“æœã€‘",c),c.res_code){case"0000":g.success(c.res_msg||"æ³¨å†ŒæˆåŠŸï¼å³å°†è·³è½¬åˆ°ç™»å½•é¡µ"),Object.keys(e).forEach(_=>e[_]=""),Object.keys(s).forEach(_=>s[_]=""),setTimeout(()=>P.push("/login"),1500);break;case"0005":g.error(c.res_msg||"è¯¥é‚®ç®±å·²è¢«æ³¨å†Œï¼Œè¯·æ›´æ¢é‚®ç®±"),e.password="",e.confirmPwd="",s.confirmPwd="",b.value?.focus();break;default:g.error(c.res_msg||"æ³¨å†Œå¤±è´¥ï¼Œè¯·è”ç³»ç®¡ç†å‘˜"),e.password="",e.confirmPwd=""}}catch(o){console.error("ã€æ³¨å†Œè¯·æ±‚å¤±è´¥ - å®Œæ•´é”™è¯¯ä¿¡æ¯ã€‘",{message:o.message,response:o.response?{status:o.response.status,data:o.response.data}:"æ— å“åº”æ•°æ®",request:o.request?"è¯·æ±‚å·²å‘é€ä½†æ— å“åº”":"è¯·æ±‚æœªå‘é€"}),e.password="",e.confirmPwd="",g.error(o.response?.data?.res_msg||"ç½‘ç»œå¼‚å¸¸ï¼Œæ³¨å†Œå¤±è´¥ï¼")}finally{n.value=!1}}};return(o,t)=>{const v=N("router-link");return d(),U($,null,{default:y(()=>[a("div",F,[t[8]||(t[8]=a("h1",{class:"system-title"},"PANNè´¢åŠ¡ç®¡ç†ç³»ç»Ÿ",-1)),a("div",I,[u(a("input",{type:"text",placeholder:"è¯·è¾“å…¥çœŸå®å§“å",class:"input-field","onUpdate:modelValue":t[0]||(t[0]=r=>e.username=r),onBlur:k,disabled:n.value},null,40,T),[[f,e.username]]),s.username?(d(),m("div",Z,i(s.username),1)):p("",!0)]),a("div",Y,[u(a("input",{type:"text",placeholder:"è¯·è¾“å…¥å­¦å·",class:"input-field","onUpdate:modelValue":t[1]||(t[1]=r=>e.account=r),onBlur:x,disabled:n.value},null,40,G),[[f,e.account]]),s.account?(d(),m("div",H,i(s.account),1)):p("",!0)]),a("div",J,[u(a("input",{type:"text",placeholder:"è¯·è¾“å…¥é‚®ç®±",ref_key:"emailInput",ref:b,class:"input-field","onUpdate:modelValue":t[2]||(t[2]=r=>e.email=r),onBlur:R,disabled:n.value},null,40,K),[[f,e.email]]),s.email?(d(),m("div",L,i(s.email),1)):p("",!0)]),a("div",Q,[u(a("input",{type:l.value?"text":"password",placeholder:"è¯·è¾“å…¥å¯†ç ",class:"input-field","onUpdate:modelValue":t[3]||(t[3]=r=>e.password=r),onBlur:B,disabled:n.value,style:{"padding-right":"30px"}},null,40,W),[[q,e.password]]),a("span",{onClick:t[4]||(t[4]=r=>l.value=!l.value),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",cursor:"pointer",color:"#999","user-select":"none"}},i(l.value?"ğŸ‘":"ğŸ‘ï¸â€ğŸ—¨ï¸"),1),s.password?(d(),m("div",X,i(s.password),1)):p("",!0)]),a("div",ee,[u(a("input",{type:"password",placeholder:"è¯·ç¡®è®¤å¯†ç ",class:"input-field","onUpdate:modelValue":t[5]||(t[5]=r=>e.confirmPwd=r),onBlur:V,disabled:n.value},null,40,se),[[f,e.confirmPwd]]),a("span",{onClick:t[6]||(t[6]=r=>l.value=!l.value),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",cursor:"pointer",color:"#999","user-select":"none"}},i(l.value?"ğŸ‘":"ğŸ‘ï¸â€ğŸ—¨ï¸"),1),s.confirmPwd?(d(),m("div",te,i(s.confirmPwd),1)):p("",!0)]),a("div",oe,[A(v,{to:"/login"},{default:y(()=>[...t[7]||(t[7]=[S("å·²æœ‰è´¦å·ï¼Œç™»å½•",-1)])]),_:1})]),a("button",{class:"register-btn",onClick:O,disabled:n.value},i(n.value?"æ³¨å†Œä¸­...":"æ³¨å†Œ"),9,ae)])]),_:1})}}},pe=D(re,[["__scopeId","data-v-ecd0842c"]]);export{pe as default};
